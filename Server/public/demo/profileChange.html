<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../assets/vendors/nprogress/nprogress.js"></script>
    <title>Document</title>
</head>
<body>
    <div id = "component">
        <form id='userForm'>
            <p><input name='UserId' type='text' placeholder="UserId" value='4'/></p>
            <p><input name='UserName' type='text' placeholder="UserName" value='Username'/></p>
            <p><input name='Email' type='text' placeholder="Email" value='425786225@qq.com'/></p>
            <p><input name='City' type='text' placeholder="City" value='Tokyo'/></p>
            <p><input name='Country' type='text' placeholder="Country" value='China'/></p>
            <p><input name='Membership' type='text' placeholder="Membership" value='2'/></p>
            <p><input name='Password' type='text' placeholder="Password" value='Password'/></p>
            <p><input name='UserLevel' type='text' placeholder="UserLevel" value='6'/></p>
            <p><input name='UserExperience' type='text' placeholder="UserExperience" value='12345'/></p> -->
            <p><input name='ProfilePhoto' type='file' value="choose a file" id = "file"/></p>   
            <p>
                <input value='button' type='button' id='btn'/>
            </p>    
            <input name='PhotoPath' type="hidden" id = 'hiddenAvatar' value='fdasfdsa'/>
        </form> 
    </div>    

    <script src="../assets/vendors/jquery/jquery.js"></script>
    <script type="text/javascript">
        var UserId = 0
        $.ajax({
            type:'get',
            url:'http://localhost:3000/front-end/login/fetch/7',
            processData:false,
            contentType:"application/json",
            success:function(response){ 
                console.log(response)       
                //response = JSON.parse(response) 
                //console.log(response)
                for (key in response[0]){
                 
                    $(`[name = ${key}]`).val(response[0][key])
                }
                UserId = response[0]['UserId']
            }
        })

        $('#btn').on('click',function(){
            var data = serializeObject($("#userForm"))
            //console.log(JSON.stringify(data))
            $.ajax({
                type:'post',
                url:'/front-end/login/update',
                data:JSON.stringify(data),
                contentType:'application/json',
                processData:false,
                success:function(response){
                    console.log(response)
                    console.log('success')
                }
            })
        })


        function serializeObject(obj){
        //[{name:'username',value:'user input'}]
        //serializeArray
        var result = {}
        var params = obj.serializeArray();
        $.each(params,function(index,value){
            result[value.name] = value.value
        })
        
        return result
    }
        
    </script>
    
</body>
</html>